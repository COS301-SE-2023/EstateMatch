name: CI
on:
  [push]

jobs:
  Test:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v3
      - name: Use Node.js 19
        uses: actions/setup-node@v3
        with:
          node-version: "19.x"
          cache: 'npm'
      - name: Install yarn
        run: npm install yarn -g
        
      - name: Test
        run: |
          yarn nx run-many --target=test --all --skip-nx-cache --parallel --coverage
          yarn nx run-many --target=build --all --skip-nx-cacahe --parallel
          yarn nx run-many --target=lint --all --skip-nx-cache --parallel
          yarn nx run-many --target=e2e --all --skip-nx-cache --parallel --coverage
